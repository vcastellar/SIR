library(usethis)
getwd()
setwd("~/prg/R/packages/SIR")
usethis::create_package("../SIR")
getwd()
infected <- read.csv("./data/infectedCV.csv")
infected
aggregate(CasosAcum ~ GrupoEdad + Sexo, data = infected, Fun = sum)
aggregate(CasosAcum ~ GrupoEdad + Sexo, data = infected, FUN = sum)
aggregate(CasosAcum ~ fecha, data = infected, FUN = sum)
infected <- aggregate(CasosAcum ~ fecha, data = infected, FUN = sum)
infected$CasosAcum,
infected
casos_ts <- ts(
infected$CasosAcum,
start = c(2020, 148),
frequency = 365
)
casos_ts
plot(casos_ts)
saveRDS(casos_ts, "./data/casos_ts.rds")
infected <- casos_ts
inc_pct <- rollapply(infected, width = 2, FUN = function(x) (x[2] - x[1]) / x[1], align = "left")
suppressPackageStartupMessages({
library(dplyr)
library(lubridate)
library(tidyr)
library(reshape2)
library(xts)
library(zoo)
library(deSolve)
})
inc_pct <- lubridate::rollapply(infected, width = 2, FUN = function(x) (x[2] - x[1]) / x[1], align = "left")
inc_pct <- lubridate::rollapply(infected, width = 2, FUN = function(x) (x[2] - x[1]) / x[1], align = "left")
inc_pct <- rollapply(infected, width = 2, FUN = function(x) (x[2] - x[1]) / x[1], align = "left")
inc_pct
alpha <- rollapply(inc_pct, width = 4, FUN = mean)
doubling_days <- log(2) / log(1 + alpha)
doubling_days
doubling_days[is.infinite(doubling_days)] <- NA
list(inc_pct = inc_pct, doubling_days = doubling_days)
plot(double_days)
plot(doubling_days)
infected <- as.numeric(infected)
infected
n <- length(infected)
if (n < 5) {
stop("Se necesitan al menos 5 observaciones para calcular inc_pct (2) y alpha (4).")
}
# 1) Incremento porcentual diario: (x[t+1] - x[t]) / x[t], para t = 1..n-1
inc_pct <- (infected[2:n] - infected[1:(n - 1)]) / infected[1:(n - 1)]
inc_pct
# 2) Media móvil de 4 sobre inc_pct (equivalente a rollapply(width=4, mean, align='left'))
#    Con embed: filas = ventanas, columnas = valores
alpha <- rowMeans(embed(inc_pct, 4))
alpha
# 3) Días de duplicación
doubling_days <- log(2) / log(1 + alpha)
doubling_days[is.infinite(doubling_days)] <- NA_real_
list(
inc_pct = inc_pct,
doubling_days = doubling_days
)
plot(alpha)
plot(alpha, type = 'l')
source("~/prg/R/packages/SIR/R/compute_growth_metrics.R")
infected <- ts(c(100, 110, 121, 133, 146, 161))
out <- compute_growth_metrics_base(infected)
out$inc_pct
out$doubling_days
infected <- readRDS("./data/casos_ts.rds")
out <- compute_growth_metrics_base(infected)
out$inc_pct
out$doubling_days
library(devtools)
devtools::document()
devtools::document()
devtools::document()
?compute_growth_metrics_base
?compute_growth_metrics_base
library(SIR)
devtools::document()
remove.packages("SIR")
devtools::load_all(".")
,libPaths()
.libPaths()
?install.packages()
remove.packages("SIR")
find.package("SIR", quiet = TRUE)
installed.packages()[installed.packages()[, "Package"] == "SIR", c("Package", "LibPath", "Version")]
q()
